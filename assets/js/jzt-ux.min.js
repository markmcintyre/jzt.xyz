/* 
 * JZT — A DOS-Era Adventure Game for the Web
 * Copyright © 2021 Mark McIntyre
 * Created by Mark McIntyre
 * All rights reserved.
 * 
 * Version : 1.0.55
 * Released: 2021-04-24
 */
!function(){function e(t,n,l){function i(u,o){if(!n[u]){if(!t[u]){var s="function"==typeof require&&require;if(!o&&s)return s(u,!0);if(r)return r(u,!0);var a=new Error("Cannot find module '"+u+"'");throw a.code="MODULE_NOT_FOUND",a}var c=n[u]={exports:{}};t[u][0].call(c.exports,function(e){var n=t[u][1][e];return i(n||e)},c,c.exports,e,t,n,l)}return n[u].exports}for(var r="function"==typeof require&&require,u=0;u<l.length;u++)i(l[u]);return i}return e}()({1:[function(e,t,n){"use strict";function l(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled}function i(e,t){function n(){return document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement}function l(){n()?(t.style.height="100%",t.style.width="100%"):(t.style.width="800px",t.style.height="640px"),e.checked=!1}e.addEventListener("click",function(){t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen()}),document.fullscreenEnabled?document.addEventListener("fullscreenchange",l):document.webkitFullscreenEnabled?document.addEventListener("webkitfullscreenchange",l):document.mozFullsSreenEnabled?document.addEventListener("mozfullscreenchange",l):document.msFullscreenEnabled&&document.addEventListener("msfullscreenchange",l)}n.isFullscreenSupported=l,n.attachFullscreenHandler=i},{}],2:[function(e,t,n){"use strict";function l(e){var t=this;this.alertElement=e,this.types=["victory","game-over","file-management"],e.querySelector(".close").addEventListener("click",function(){t.alertElement.classList.remove("in")},!1)}l.prototype.callback=function(e,t){var n,l,i,r,u,o,s,a=this.alertElement.querySelector(".message"),c=this.alertElement.querySelector(".score"),d=this.alertElement.querySelector(".playtime"),m=c.querySelector(".value"),h=d.querySelector(".value"),f=this.alertElement.querySelectorAll(".social-share"),g=this;setTimeout(function(){if("victory"===e)a.innerHTML="Congratulations; you’ve won!",n=Math.floor(t.time/36e5),l=Math.floor(t.time%36e5/6e4),i=Math.floor(t.time%6e4/1e3),i=i<9?"0"+i:i,l=l<9?"0"+l:l,n=n<9?"0"+n:n,d.style.display="block",h.innerHTML=n+":"+l+":"+i;else{if("game-over"!==e)return void g.alertElement.classList.remove("in");a.innerHTML="Better luck next time!",d.style.display="none"}for(s=t.score.toLocaleString("en"),m.innerHTML=s,r=0;r<f.length;r+=1)u=f[r],o=u.getAttribute("data-uri-template"),u.href=o.replace("{url}",encodeURIComponent(document.URL)).replace("{score}",encodeURIComponent(s));g.alertElement.classList.add("in")},"victory"===e||"game-over"===e?1e3:0)},n.HighScoreListener=l},{}],3:[function(e,t,n){"use strict";function l(){var e,t=document.getElementById("settings-bar"),n=t.querySelector(".full-screen"),l=document.getElementById("game-area"),s=l.querySelector("canvas"),a=new i(l.querySelector(".alert")),c=l.getAttribute("data-jzt-world");e=new jzt.Game({canvasElement:s,notificationListeners:[a],onLoadCallback:function(n){n?(e.run("/assets/data/jzt/"+c+".json"),e.observeSettings(new r(t))):(document.getElementById("unsupported-browser").style.display="block",s.parentNode.removeChild(s))}}),t.classList.remove("inactive"),u()?o(n,l):(n=n.parentNode,n.parentNode.removeChild(n))}var i=e("./highscore").HighScoreListener,r=e("./settings").Settings,u=e("./fullscreen").isFullscreenSupported,o=e("./fullscreen").attachFullscreenHandler;!function(){var e=document.getElementById("game-area"),t=document.querySelector("button");t.addEventListener("click",function(){e.removeChild(t),l()})}()},{"./fullscreen":1,"./highscore":2,"./settings":4}],4:[function(e,t,n){"use strict";function l(e){var t=this;if(!(this instanceof l))throw"Settings must be constructed with new";this.listenerCallbacks=[],this.audioMuteElement=e.querySelector(".mute"),this.audioVolumeElement=e.querySelector("input[name='audio-volume']"),this.languageElement=e.querySelector("select[name='language']"),this.audioMuteElement&&this.audioMuteElement.addEventListener("click",function(e){var n=e.target.closest(".button");n.classList.toggle("active"),t.notify({audioMute:n.classList.contains("active")})}),this.audioVolumeElement&&this.audioVolumeElement.addEventListener("change",function(e){t.notify({audioVolume:parseFloat(e.target.value)/10})}),this.languageElement&&this.languageElement.addEventListener("change",function(e){t.notify({language:e.target.value})})}l.prototype.addListener=function(e){this.listenerCallbacks.push(e)},l.prototype.notify=function(e){var t;for(t=0;t<this.listenerCallbacks.length;t+=1)this.listenerCallbacks[t](e)},l.prototype.initialize=function(e){e.audioActive?(this.audioMuteElement&&(e.audioMute?this.audioMuteElement.classList.add("active"):this.audioMuteElement.classList.remove("active")),this.audioVolumeElement&&(this.audioVolumeElement.value=10*e.audioVolume)):(this.audioMuteElement&&this.audioMuteElement.classList.add("active"),this.audioVolumeElement&&(this.audioVolumeElement.disabled=!0)),this.languageElement&&(this.languageElement.value=e.language)},n.Settings=l},{}]},{},[3]);