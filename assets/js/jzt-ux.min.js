/* 
 * JZT — A DOS-Era Adventure Game for the Web
 * Copyright © 2019 Mark McIntyre
 * Created by Mark McIntyre
 * All rights reserved.
 * 
 * Version : 1.0.45
 * Released: 2019-06-23
 */
!function e(t,n,l){function r(u,o){if(!n[u]){if(!t[u]){var s="function"==typeof require&&require;if(!o&&s)return s(u,!0);if(i)return i(u,!0);var a=new Error("Cannot find module '"+u+"'");throw a.code="MODULE_NOT_FOUND",a}var c=n[u]={exports:{}};t[u][0].call(c.exports,function(e){var n=t[u][1][e];return r(n?n:e)},c,c.exports,e,t,n,l)}return n[u].exports}for(var i="function"==typeof require&&require,u=0;u<l.length;u++)r(l[u]);return r}({1:[function(e,t,n){"use strict";function l(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled}function r(e,t){function n(){return document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement}function l(){n()?(t.style.height="100%",t.style.width="100%"):(t.style.width="800px",t.style.height="640px"),e.checked=!1}e.addEventListener("click",function(){t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen()}),document.fullscreenEnabled?document.addEventListener("fullscreenchange",l):document.webkitFullscreenEnabled?document.addEventListener("webkitfullscreenchange",l):document.mozFullsSreenEnabled?document.addEventListener("mozfullscreenchange",l):document.msFullscreenEnabled&&document.addEventListener("msfullscreenchange",l)}n.isFullscreenSupported=l,n.attachFullscreenHandler=r},{}],2:[function(e,t,n){"use strict";function l(e){var t=this;this.alertElement=e,this.types=["victory","game-over","file-management"],e.querySelector(".close").addEventListener("click",function(){t.alertElement.classList.remove("in")},!1)}l.prototype.callback=function(e,t){var n,l,r,i,u,o,s,a=this.alertElement.querySelector(".message"),c=this.alertElement.querySelector(".score"),d=this.alertElement.querySelector(".playtime"),m=c.querySelector(".value"),h=d.querySelector(".value"),f=this.alertElement.querySelectorAll(".social-share"),g=this;setTimeout(function(){if("victory"===e)a.innerHTML="Congratulations; you’ve won!",n=Math.floor(t.time/36e5),l=Math.floor(t.time%36e5/6e4),r=Math.floor(t.time%6e4/1e3),r=9>r?"0"+r:r,l=9>l?"0"+l:l,n=9>n?"0"+n:n,d.style.display="block",h.innerHTML=n+":"+l+":"+r;else{if("game-over"!==e)return void g.alertElement.classList.remove("in");a.innerHTML="Better luck next time!",d.style.display="none"}for(s=t.score.toLocaleString("en"),m.innerHTML=s,i=0;i<f.length;i+=1)u=f[i],o=u.getAttribute("data-uri-template"),u.href=o.replace("{url}",encodeURIComponent(document.URL)).replace("{score}",encodeURIComponent(s));g.alertElement.classList.add("in")},"victory"===e||"game-over"===e?1e3:0)},n.HighScoreListener=l},{}],3:[function(e,t,n){"use strict";var l=e("./highscore").HighScoreListener,r=e("./settings").Settings,i=e("./fullscreen").isFullscreenSupported,u=e("./fullscreen").attachFullscreenHandler;!function(){var e,t=document.getElementById("settings"),n=t.querySelector("input[name='fullscreen']"),o=document.getElementById("game-area"),s=o.querySelector("canvas"),a=new l(o.querySelector(".alert")),c=o.getAttribute("data-jzt-world");e=new jzt.Game({canvasElement:s,notificationListeners:[a],onLoadCallback:function(n){n?(e.run("/assets/data/jzt/"+c+".json"),e.observeSettings(new r(t))):(document.getElementById("unsupported-browser").style.display="block",s.parentNode.removeChild(s))}}),i()?u(n,o):(n=n.parentNode,n.parentNode.removeChild(n))}()},{"./fullscreen":1,"./highscore":2,"./settings":4}],4:[function(e,t,n){"use strict";function l(e){var t=this;if(!(this instanceof l))throw"Settings must be constructed with new";this.listenerCallbacks=[],this.audioMuteElement=e.querySelector("input[name='audio-mute']"),this.audioVolumeElement=e.querySelector("input[name='audio-volume']"),this.languageElement=e.querySelector("select[name='language']"),this.audioMuteElement&&this.audioMuteElement.addEventListener("click",function(e){t.notify({audioMute:e.target.checked})}),this.audioVolumeElement&&this.audioVolumeElement.addEventListener("change",function(e){t.notify({audioVolume:parseFloat(e.target.value)/10})}),this.languageElement&&this.languageElement.addEventListener("change",function(e){t.notify({language:e.target.value})})}l.prototype.addListener=function(e){this.listenerCallbacks.push(e)},l.prototype.notify=function(e){var t;for(t=0;t<this.listenerCallbacks.length;t+=1)this.listenerCallbacks[t](e)},l.prototype.initialize=function(e){e.audioActive?(this.audioMuteElement&&(this.audioMuteElement.checked=e.audioMute),this.audioVolumeElement&&(this.audioVolumeElement.value=10*e.audioVolume)):(this.audioMuteElement&&(this.audioMuteElement.checked=!0,this.audioMuteElement.disabled=!0),this.audioVolumeElement&&(this.audioVolumeElement.disabled=!0)),this.languageElement&&(this.languageElement.value=e.language)},n.Settings=l},{}]},{},[3]);